<!DOCTYPE html>
<html>
<head>
    <title>Registration</title>
    <link rel="shortcut icon" type="image/x-icon" href="logo.ico">
    <style>
        html, body {
            height: 95%;
            margin: 0;
            padding: 0;
        }

        .container {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            font-family: Arial, sans-serif;
        }

        .form-container {
            display: flex;
            justify-content: space-between;
            border: 1px solid brown;
            border-radius: 10px;
            padding: 20px;
            background-color: transparent;
            height: 90vh;
            box-sizing: border-box;
            overflow: hidden;
            margin-bottom:-50px;
        }

        .form-left {
            display: flex;
            justify-content: center;
            align-items: center;
            flex: 1;
            height: 150%; /* Adjust the height as desired */
            margin-top:-170px;
         
        }

        .form-right {
            display: flex;
            justify-content: center;
            align-items: center;
            flex: 1;
            height: 70%; /* Adjust the height as desired */
            margin-top: 80px;
        }


        .form-left .logo {
            max-height: 100%;
            max-width: 100%;
            height: auto;
            width: auto;
        }

        .login-box {
            margin: 20px;
          
            padding: 20px;
            background-color: transparent;
        }

        .form-group {
            margin-bottom: 10px;
        }

        label {
            display: block;
        }

        input[type="text"],
        input[type="email"],
        input[type="tel"],
        input[type="password"],
        button[type="submit"] {
            width: 100%;
            padding: 8px;
            border-radius: 3px;
            border: 1px solid #ccc;
            font-family: 'Times New Roman';
        }

        button[type="submit"] {
            background-color: #4CAF50;
            color: white;
            cursor: pointer;
        }

            button[type="submit"]:disabled {
                background-color: #ddd;
                cursor: not-allowed;
            }

        .login-form {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            margin-top: 20px;
        }

        .login-option {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
        }

        .image-container {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .login-image {
            max-height: 100%;
            max-width: 100%;
            width: auto;
            height: auto;
        }

        .footer {
            background-color: #f5f5f5;
            height: 100px;
            padding: 10px;
            display: flex;
            justify-content: center;
            align-items: center;
        }

            .footer a {
                color: #333;
                text-decoration: none;
                margin-right: 10px;
                font-size: 18px;
                font-style: italic;
            }

            .footer img {
                width: 20px;
                height: 20px;
                margin-right: 5px;
            }
        .box-title {
            color: brown;
            font-style: italic;
        }
        label[for="fullname"],
        label[for="id_number"],
        label[for="mobile"],
        label[for="email"],
        label[for="password"],
        label[for="confirm_password"] {
            color: brown;
            font-style: italic;
        }


    </style>
</head>
<body>
    <div class="form-container">
        <div class="form-left">
            <img src="plan2.jpg" class="logo" alt="Logo">
        </div>
        <div class="form-right">
            <div class="login-box wow zoomIn">
                <div class="white-box">
                    <div class="form-horizontal">
                        <input type="hidden" id="action-url" value="/api/user/createAccount">
                        <input type="hidden" id="redirect-url" value="/default">
                        <div class="form-group">
                            <h2 class="box-title">CREATE AN ACCOUNT</h2>
                            <p>Already have an account? <a href="login.html" id="loginLink" onclick="redirectToLogin()">Login</a></p>
                        </div>
                        <hr class="bg-theme-highlight" />
                        <div class="form-group m-b-10">
                            <label for="fullname" class="col-sm-3 control-label">*Full Name</label>
                            <div class="col-sm-9">
                                <div class="input-group">
                                    <div class="input-group-addon"><i class="ti-user"></i></div>
                                    <input type="text" class="form-control" name="fullname" id="fullname" placeholder="Enter your full name" required
                                            data-error="Enter at least 5 characters">
                                </div>
                                <div class="help-block with-errors"></div>
                            </div>
                        </div>
                        <div class="form-group m-b-10">
                            <label for="id_number" class="col-sm-3 control-label">*ID/Passport Number</label>
                            <div class="col-sm-9">
                                <div class="input-group">
                                    <div class="input-group-addon"><i class="ti-credit-card"></i></div>
                                    <input type="text" class="form-control" name="id_number" id="id_number" placeholder="Enter ID/Passport number" required
                                            data-error="Enter a valid ID/Passport number" />
                                </div>
                                <div class="help-block with-errors"></div>
                            </div>
                        </div>
                        <div class="form-group m-b-10">
                            <label for="mobile" class="col-sm-3 control-label">*Mobile Number</label>
                            <div class="col-sm-9">
                                <div class="input-group">
                                    <div class="input-group-addon"><i class="ti-mobile"></i></div>
                                    <input type="tel" class="form-control" name="mobile" id="mobile" placeholder="e.g. +254712345678" required
                                            data-error="Enter a valid mobile phone number" />
                                </div>
                                <div class="help-block with-errors"></div>
                            </div>
                        </div>
                        <div class="form-group m-b-10">
                            <label for="email" class="col-sm-3 control-label">*Email</label>
                            <div class="col-sm-9">
                                <div class="input-group">
                                    <div class="input-group-addon"><i class="ti-email"></i></div>
                                    <input type="email" class="form-control" name="email" id="email" placeholder="Enter email" required
                                            data-error="Enter a valid email address" />
                                </div>
                                <div class="help-block with-errors"></div>
                            </div>
                        </div>
                        <div class="form-group m-b-10">
                            <label for="password" class="col-sm-3 control-label">*Password</label>
                            <div class="col-sm-9">
                                <div class="input-group">
                                    <div class="input-group-addon"><i class="ti-lock"></i></div>
                                    <input type="password" class="form-control" name="password" id="password" placeholder="Enter password" required
                                            data-error="Enter a strong password" />
                                </div>
                                <div class="help-block with-errors"></div>
                            </div>
                        </div>
                        <div class="form-group m-b-10">
                            <label for="confirm_password" class="col-sm-3 control-label">* Confirm Password</label>
                            <div class="col-sm-9">
                                <div class="input-group">
                                    <div class="input-group-addon"><i class="ti-lock"></i></div>
                                    <input type="password" class="form-control" name="confirm_password" id="confirm_password" placeholder="Enter password confirmation"
                                            required data-error="Confirmation must match password" />
                                </div>
                                <div class="help-block with-errors"></div>
                            </div>
                        </div>
                        <div class="form-group m-b-30">
                            <div class="col-sm-offset-3 col-sm-9">
                                <button type="submit" name="sign-up" id="sign-up" class="btn btn-info waves-effect waves-light m-t-10"
                                        data-error="Correct fields marked in red" data-progress="Saving" onclick="register()">
                                    Register
                                </button>
                                <div class="help-block with-errors alert form-errors break-word"></div>
                            </div>
                        </div>
                        <div id="success-message" style="display: none; color: green;">Registration successful!</div>
                        <p style="font-size:0.8em;">
                            By clicking "Sign up", you agree to our <a href="/terms">terms of service</a>,
                            <a href="/privacy-policy">privacy policy</a>, and
                            <a href="/cookie-policy">cookie policy</a>
                        </p>
                    </div>
                    <div class="col-sm-12 hidden-sm hidden-md hidden-lg" style="margin-top:100px;"></div>
                </div>
            </div>
        </div>
    </div>
 
    <div class="footer">
        <div style="display: flex; align-items: center; justify-content: space-between;">
            <div>
                <p style="margin-right: 100px; color: brown;"><i>Email: infomation@digireg.co.ke</i></p>
            </div>
            <div>
                <a href="https://digireg.co.ke" style="color: brown; margin-right: 20px; margin-top: -5px;" target="_blank">Digireg.co.ke</a>
                <a href="https://www.linkedin.com/company/digireg-kenya-ltd/" style="margin-right: 50px;" target="_blank"><img src="plan12.png" alt="LinkedIn"></a>
            </div>
            <div style="text-align: right;">
                <p style="margin-right: 150px; color: brown;"><i>Address: 5th Floor-Doctors Park,<br> 3rd Parklands Ave.<br> 49458-00100, Nairobi,<br> Kenya</i></p>
            </div>
        </div>
    </div>
    <script>
        function register() {
            // Get the form values
            var fullName = document.getElementById("fullname").value;
            var idNumber = document.getElementById("id_number").value;
            var mobileNumber = document.getElementById("mobile").value;
            var email = document.getElementById("email").value;
            var password = document.getElementById("password").value;
            var confirmPassword = document.getElementById("confirm_password").value;

            // Perform form validation (you can add your own validation logic here)

            // Create an object with the form data
            var formData = {
                fullName: fullName,
                idNumber: idNumber,
                mobileNumber: mobileNumber,
                email: email,
                password: password,
                confirmPassword: confirmPassword
            };

            // Make an AJAX request to the backend
            var xhr = new XMLHttpRequest();
            xhr.open("POST", "https://localhost:7225/api/register", true);
            xhr.setRequestHeader("Content-Type", "application/json");
            xhr.onreadystatechange = function () {
                if (xhr.readyState === 4) {
                    if (xhr.status === 200) {
                        // Registration successful
                        document.getElementById("success-message").style.display = "block";
                        redirectToLogin(); // Redirect to the login page
                    } else {
                        // Registration failed
                        console.error("Registration failed");
                    }
                }
            };
            xhr.send(JSON.stringify(formData));
        }

        function redirectToLogin() {
            var fullName = document.getElementById("fullname").value;
            var firstName = getFirstName(fullName);
            var redirectURL = "index.html?fullname=" + encodeURIComponent(firstName);
            window.location.href = redirectURL;
        }

        // Function to get the user's first name from the full name
        function getFirstName(fullName) {
            var nameParts = fullName.trim().split(" ");
            return nameParts[0];
        }


    </script>


</body>
</html>
